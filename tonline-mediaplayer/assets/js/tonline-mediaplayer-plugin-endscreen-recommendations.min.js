(function(a){"function"==typeof define&&define.amd?define(a):a()})(function(){'use strict';function a(b){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},a(b)}function b(a){function b(b){return 0===a.indexOf(b)}return a=new String(a),{startsWith:b}}function c(d,f,e){function g(){if(4===i.readyState){var a=b(i.status);return a.startsWith(30)?new c(d,f,e):200===i.status?void f(!1,i):f(i,{})}}function h(){i&&(i.open("GET",d,!0),f&&(i.onerror=function(a){f(a,{})},i.onreadystatechange=g),i.send())}if(d=d||!1,f=f||!1,e=e||{},e.followRedirects=void 0===a(e.followRedirects)||e.followRedirects,!1!==d){var i=new XMLHttpRequest;i.withCredentials=e.withCredentials||!1,i.requestContentType=e.requestContentType||null,h()}}var d=function(){},e=function(a){a.html=function(b){return a.innerHTML=b,a},a.append=function(b){return b.length?b.forEach(function(b){a.appendChild(b)}):a.appendChild(b),a},a.on=function(b,c,d){return d=d||!1,-1===b.indexOf(",")?a.addEventListener(b,c,d):b.split(",").forEach(function(b){a.addEventListener(b,c,d)}),a},a.off=function(b,c,d){return a.removeEventListener(b,c,d),a}},f=function(b,c,d){c=c||null,d=d||null;var f=document.createElement(b);if(e(f),c&&c.length&&c.forEach(function(a){f.setAttribute(a[0],a[1])}),d)switch(a(d)){case"object":d.length?d.forEach(function(a){f.appendChild(a)}):f.appendChild(d);break;case"string":d.length&&(f.innerHTML=d);break;default:}return f},g=window.TOnlineMediaplayerFramework;g.RegisterPlugin("Endscreen-Recommendations",function(a,b){var e=g.Log;if(e()("Init plugin","Endscreen-Recommendations"),b=b||{},b.revolverplayTimeout=b.revolverplayTimeout||a.GetData("endscreen-revolverplay-timeout")||10,b.dataURL=b.dataURL||a.GetData("endscreen-url")||"","undefined"==typeof b.revolverplay){var h=a.GetData("endscreen-revolverplay");null===h?b.revolverplay=!1:"true"===h?b.revolverplay=!0:"false"===h&&(b.revolverplay=!1)}b.OnShowCallback=b.OnShowCallback||d,b.OnClickCallback=b.OnClickCallback||d,b.OnBeforeNextVideo=b.OnBeforeNextVideo||d,e()("opts",b);var i,j=null,k=f("div",[["class","row plugin-endscreen-recommendations hidden"]]),l=function(a){var b=a.GetClickjackingOverlayEl(),c=a.GetPosterImageContainerEl();b.classList.add("hidden"),c.style.display="none"},m=function(a){var b=a.GetClickjackingOverlayEl(),c=a.GetPosterImageContainerEl();b.classList.remove("hidden"),c.style.display="block"},n=function(a){clearInterval(j),!1===k.classList.contains("hidden")&&(k.classList.add("hidden"),m(a))},o=function(a,b){var c="<div class=\"video-single\">\n\t<a href=\"{{targetURL1}}\" data-clicktarget=\"topteaser\" data-videoid=\"{{videoID1}}\">\n\t\t<div class=\"video-single-bg\" style=\"background-image:url('{{imageURL1}}');\"></div>\n\t\t<div class=\"video-single-bg-overlay\"></div>\n\t\t<div class=\"header-one col-12\">\n\t\t\t<span class=\"text\">\n\t\t\t\t<span class=\"no-revolverplay\">\n\t\t\t\t\tN\xE4chstes Video\n\t\t\t\t</span>\n\t\t\t\t<span class=\"revolverplay\">\n\t\t\t\t\tN\xE4chstes Video in <span class=\"countdown\">{{revolverplay_countdown_number}}</span> Sekunden | <span class=\"pause-resume\" data-toggle-text-resume=\"Fortsetzen\" data-toggle-text-pause=\"Anhalten\">Anhalten</span>\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t</div>\n\t\t<table class=\"video-one\">\n\t\t\t<tr>\n\t\t\t\t<td class=\"first\">\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{{title1}}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<div class=\"big-play-icon\">\n\t\t\t\t\t\t\t\t\t<svg class=\"progress\" viewBox=\"0 0 120 120\">\n\t\t\t\t\t\t\t\t\t\t<circle class=\"progress__meter\"  cx=\"60\" cy=\"60\" r=\"54\" fill=\"none\" stroke=\"#e6e6e6\" stroke-width=\"3\" />\n\t\t\t\t\t\t\t\t\t\t<circle class=\"progress__value\" cx=\"60\" cy=\"60\" r=\"54\" fill=\"none\" stroke=\"#f77a52\" stroke-width=\"3\" stroke-dasharray=\"339.292\" stroke-dashoffset=\"339.292\" />\n\t\t\t\t\t\t\t\t\t\t<path fill=\"#e6e6e6\" d=\"m 60.940678,83.618644 -25,-32 h 51 z\"/></svg>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t</td>\n\t\t</table>\n\t</a>\n</div>\n\n<div class=\"video-multiple\">\n\t<div class=\"video-multiple-bg\" style=\"background-image:url('{{posterImageURL}}');\"></div>\n\t<div class=\"video-multiple-bg-overlay\"></div>\n\t<div class=\"header col-12\">\n\t\t<span class=\"text\">\n\t\t\t<span class=\"no-revolverplay\">\n\t\t\t\tN\xE4chste Videos\n\t\t\t</span>\n\t\t\t<span class=\"revolverplay\">\n\t\t\t\tN\xE4chstes Video in <span class=\"countdown\">{{revolverplay_countdown_number}}</span> Sekunden | <span class=\"pause-resume\" data-toggle-text-resume=\"Fortsetzen\" data-toggle-text-pause=\"Anhalten\">Anhalten</span>\n\t\t\t</span>\n\t\t</span>\n\t</div>\n\t<table class=\"video-grid\">\n\t\t<tr>\n\t\t\t<td class=\"first\">\n\t\t\t\t<a href=\"{{targetURL1}}\" data-idx=1 data-clicktarget=\"carouselteaser\" data-videoid=\"{{videoID1}}\">\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<img src=\"{{imageURL1}}\" />\n\t\t\t\t\t\t\t\t<div class=\"play-icon first\">\n\t\t\t\t\t\t\t\t\t<svg class=\"progress\" width=\"120\" height=\"120\" viewBox=\"0 0 120 120\">\n\t\t\t\t\t\t\t\t\t\t<circle class=\"progress__meter\"  cx=\"60\" cy=\"60\" r=\"54\" fill=\"none\" stroke=\"#e6e6e6\" stroke-width=\"3\" />\n\t\t\t\t\t\t\t\t\t\t<circle class=\"progress__value\" cx=\"60\" cy=\"60\" r=\"54\" fill=\"none\" stroke=\"#f77a52\" stroke-width=\"3\" stroke-dasharray=\"339.292\" stroke-dashoffset=\"339.292\" />\n\t\t\t\t\t\t\t\t\t\t<path fill=\"#e6e6e6\" d=\"m 60.940678,83.618644 -25,-32 h 51 z\"/></svg>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{{title1}}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t</a>\n\t\t\t</td>\n\t\t\t<td class=\"second\">\n\t\t\t\t<a href=\"{{targetURL2}}\" data-idx=2 data-clicktarget=\"carouselteaser\" data-videoid=\"{{videoID2}}\">\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<img src=\"{{imageURL2}}\" />\n\t\t\t\t\t\t\t\t<div class=\"play-icon\">\n\t\t\t\t\t\t\t\t\t<svg class=\"progress\" width=\"120\" height=\"120\" viewBox=\"0 0 120 120\">\n\t\t\t\t\t\t\t\t\t\t<circle class=\"progress__meter\"  cx=\"60\" cy=\"60\" r=\"54\" fill=\"none\" stroke=\"#e6e6e6\" stroke-width=\"3\" />\n\t\t\t\t\t\t\t\t\t\t<circle class=\"progress__value\" cx=\"60\" cy=\"60\" r=\"54\" fill=\"none\" stroke=\"#f77a52\" stroke-width=\"3\" stroke-dasharray=\"339.292\" stroke-dashoffset=\"339.292\" />\n\t\t\t\t\t\t\t\t\t\t<path fill=\"#e6e6e6\" d=\"m 60.940678,83.618644 -25,-32 h 51 z\"/></svg>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{{title2}}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t</a>\n\t\t\t</td>\n\t\t\t<td class=\"third\">\n\t\t\t\t<a href=\"{{targetURL3}}\" data-idx=3 data-clicktarget=\"carouselteaser\" data-videoid=\"{{videoID3}}\">\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<img src=\"{{imageURL3}}\" />\n\t\t\t\t\t\t\t\t<div class=\"play-icon\">\n\t\t\t\t\t\t\t\t\t<svg class=\"progress\" width=\"120\" height=\"120\" viewBox=\"0 0 120 120\">\n\t\t\t\t\t\t\t\t\t\t<circle class=\"progress__meter\"  cx=\"60\" cy=\"60\" r=\"54\" fill=\"none\" stroke=\"#e6e6e6\" stroke-width=\"3\" />\n\t\t\t\t\t\t\t\t\t\t<circle class=\"progress__value\" cx=\"60\" cy=\"60\" r=\"54\" fill=\"none\" stroke=\"#f77a52\" stroke-width=\"3\" stroke-dasharray=\"339.292\" stroke-dashoffset=\"339.292\" />\n\t\t\t\t\t\t\t\t\t\t<path fill=\"#e6e6e6\" d=\"m 60.940678,83.618644 -25,-32 h 51 z\"/></svg>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{{title3}}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t</a>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n",d=0;a.forEach(function(a,b){d=b+1;var e=new RegExp("{{imageURL"+d+"}}","g"),f=new RegExp("{{title"+d+"}}","g"),g=new RegExp("{{targetURL"+d+"}}","g"),h=new RegExp("{{videoID"+d+"}}","g");c=c.replace(e,a.thumb).replace(f,a.title).replace(g,a.url).replace(h,a.vid)}),c=c.replace(/{{posterImageURL}}/g,b.GetPosterImage()),k.html(c)},p=function(){var a=k.offsetWidth;530<a?(k.querySelector(".header").style.height="30%",k.querySelector(".video-grid").style.height="70%"):330<a?(k.querySelector(".header").style.height="30%",k.querySelector(".video-grid").style.height="70%"):(k.querySelector(".header").style.height="15%",k.querySelector(".video-grid").style.height="85%")},q=function(a){return a.IsInPortraitMode()||320>=a.GetWidth()},r=function(){return k.querySelector(".video-single a").href},s=function(a,b){q(a)?(k.querySelector(".video-single").style.display="block",k.querySelector(".video-multiple").style.display="none",b.revolverplay?(k.querySelector(".video-single .revolverplay").style.display="block",k.querySelector(".video-single .no-revolverplay").style.display="none",k.querySelector(".video-multiple .revolverplay").style.display="block",k.querySelector(".video-multiple .no-revolverplay").style.display="none"):(k.querySelector(".video-single .revolverplay").style.display="none",k.querySelector(".video-single .no-revolverplay").style.display="block",k.querySelector(".video-multiple .revolverplay").style.display="none",k.querySelector(".video-multiple .no-revolverplay").style.display="block")):(b.revolverplay?(k.querySelector(".video-single .revolverplay").style.display="block",k.querySelector(".video-single .no-revolverplay").style.display="none",k.querySelector(".video-multiple .revolverplay").style.display="block",k.querySelector(".video-multiple .no-revolverplay").style.display="none"):(k.querySelector(".video-single .revolverplay").style.display="none",k.querySelector(".video-single .no-revolverplay").style.display="block",k.querySelector(".video-multiple .revolverplay").style.display="none",k.querySelector(".video-multiple .no-revolverplay").style.display="block"),k.querySelector(".video-multiple").style.display="block",k.querySelector(".video-single").style.display="none")},t=function(b){function c(a){var b=f*(1-a/100);e[0].style.strokeDashoffset=b,e[1].style.strokeDashoffset=b}var d=parseInt(b.revolverplayTimeout,10),e=k.querySelectorAll(".progress__value"),f=2*Math.PI*54,g=function(){k.querySelectorAll(".revolverplay span.countdown").forEach(function(a){a.innerHTML=d}),c(100*((b.revolverplayTimeout-d)/b.revolverplayTimeout)),d--,0>d&&(clearInterval(j),b.OnBeforeNextVideo(a,i),window.location.href=r())};g(),j=setInterval(g,1e3),k.querySelectorAll(".revolverplay span.pause-resume").forEach(function(a){a.addEventListener("click",function(a){a.stopPropagation(),a.preventDefault(),this.classList.toggle("paused"),this.classList.contains("paused")?(clearInterval(j),this.innerHTML=this.getAttribute("data-toggle-text-resume")):(this.innerHTML=this.getAttribute("data-toggle-text-pause"),j=setInterval(g,1e3))})})};a.GetEl().appendChild(k);var u=function(c,d){if(!0!==a.IsPlaying()&&!0!==a.IsPlayingAd()){if(a.IsInFullScreenMode()&&a.ExitFullScreen(),a.IsInPictureInPictureMode()&&a.ExitPictureInPictureMode(),a.HideLoadingSpinner(),c)return void e("error")("Error receiving data",c);b.OnShowCallback(a);try{i=JSON.parse(d.responseText)}catch(a){return void e("error")("JSON parsing error:",a)}if(e()("Data",i),0===i.length)return void e("error")("JSON array is empty",i);o(i,a),document.querySelectorAll("a").forEach(function(c){c.addEventListener("click",function(c){b.OnClickCallback(a,c)})}),s(a,b),window.addEventListener("resize",function(){s(a,b),p()}),setTimeout(function(){p()},500),a.On("seeking",function(){n(a)});var f=a.GetControlBarButton("replay"),g=function(b){b.preventDefault(),k.classList.add("hidden"),m(a)};f.addEventListener("click",g),l(a),b.revolverplay&&t(b),k.classList.remove("hidden")}};a.On("ended",function(){setTimeout(function(){a.IsPlaying()||a.IsPlayingAd()||a.GetCurrentTime()!==a.GetDuration()||(a.ShowLoadingSpinner(),new c(b.dataURL,u))},3e3)})})});